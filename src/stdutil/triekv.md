# trie kv寻址架构设计

假设有一段内存地址空间Mem，访问形式为传统的int64寻址，每个内存单元为int8

triekv架构，则是通过key（可以理解为字符串、或byte数组），得到value（byte数组）

我们的问题是，如何设计一些函数，把一块完整的内存空间，通过kv来访问管理

## 设计方案

Mem可以看作[Memstart,Memend]
key的字符类别总数，定义为N。
如果key字符覆盖所有类别，那么N=256
如果key字符只包含字母数字一些符号，那么N=64

一.索引区
存放trienode索引

我们定义trienode
trienode需要记录

1.value的地址（偏移量）
3.子节点数组的类别和长度clen，1字节
    第一位表示类别，分为全长、or有序字符偏移
        如果全长，则子节点数组是N*4字节偏移量
        如果有序字符偏移数组，那么clen*5(1字符+4字节偏移量)
    这意味着trienode自身也是变长的


二.数据区
存放value
<!-- 假设均分比为N=10

我们把数据区，不断的一分为N，这样可以形成一个满N叉树。
每个node所占据的区域，饱含着所有子内存区域。

nodeheader会存储以下信息
N bit的使用标记

申请

根据申请的value长度，进行logN得到其长度量级

释放逻辑 -->

